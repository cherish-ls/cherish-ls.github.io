<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="tree,B+tree,B-tree,索引," />










<meta name="description" content="前言目前我们常见的动态查找树主要有：二叉查找树（Binary Search Tree），平衡二叉查找树（Balanced Binary Search Tree），红黑树(Red-Black Tree )，这三者是典型的二叉树结构，利用二分法，可以使其查询的时间复杂度为O(log2N)，即与树的深度相关。  但二叉树一个节点中包含有一个元素，和指向两个子节点的指针，在现实生活中，未免有些太“奢侈”了">
<meta property="og:type" content="article">
<meta property="og:title" content="B树&#x2F;B+树分析">
<meta property="og:url" content="http://yoursite.com/2020/04/28/B%E6%A0%91-B-%E6%A0%91%E5%88%86%E6%9E%90/index.html">
<meta property="og:site_name" content="cherish">
<meta property="og:description" content="前言目前我们常见的动态查找树主要有：二叉查找树（Binary Search Tree），平衡二叉查找树（Balanced Binary Search Tree），红黑树(Red-Black Tree )，这三者是典型的二叉树结构，利用二分法，可以使其查询的时间复杂度为O(log2N)，即与树的深度相关。  但二叉树一个节点中包含有一个元素，和指向两个子节点的指针，在现实生活中，未免有些太“奢侈”了">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-0dcba6005c20f21c6a6e966b9f239b7bc91.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-4ab23420bac3cd2b0d9278357cf27adb754.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-45013c901275cb3600f245d8c75f79590fd.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-11c5ae696f01bc75d91131d6ffb2a9dfeeb.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-bb258827f7c35e85442858c7e596f2e2524.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-1ebfa206ae65baff44ff3be6ad33826a6cb.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-a9ce1d66b48acaafe781167587318d9c0f0.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-0af274b789dd1f16f170fc83968f07eb356.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-cbd8d929ac323b575bf7d75becdfacf44a8.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-e9af49d254a060491b461731484c692dc6c.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-a90c8160743bcd04518ca54bb903db6c700.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-d0df1d26e4a539e449f182883079b6e000f.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-c901bb0b11e87bc7ce2f19966758b8f74e2.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-33e4f1cbd03fa5a95705511b5fa003df45c.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-6d015f6544f424661fdc345f7b017b3bbf4.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-dbe6fba9b6d67cc51aa034d00863633519b.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-85fdbd40c1a754b1940a8c3edf02992f702.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-85fdbd40c1a754b1940a8c3edf02992f702.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-7e820bffda4330e8a49b4f6dcfe7761c2ad.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-85fdbd40c1a754b1940a8c3edf02992f702.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-ff3953493f06bb17b382e8bc1a3d38adf6a.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-ff3953493f06bb17b382e8bc1a3d38adf6a.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-7459240a23aa224c93bbfb382960001664c.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-752976b81e53a4afd84139727851c16e5a3.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-71b65cb9f29444227d3fbb8a8e9b84d9130.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-d16ff524d920d5b2a808b41aedbd6c256b5.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-533ee1cfa033ba1ce6dd6e4fc9af90c2d7e.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-dd36b3e0400e00aea397caac07683e5014a.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-22a6217fb1ebcb7245d74fb5b4b92659a2e.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-f03ece76b29d638675bbc7c937b7b34ee73.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-d0a8d9b2c71ffd1a692dd88fc44ec6bca10.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-0ea3104f7c970ceb6bba681de50de17f63d.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-f92dccd11f24b2ddbb8200c36386da6375d.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-40118bf9f9ac718d72d7512dab23e9e83d7.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-d9bcc83498f32e2b879edfef356dafcaa62.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-24fbbe8a4fa67721cc8a833a73f4d097ec8.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-c2532b2da7da86911713593d79715fbc13f.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-7a9ce40e582bd61f21ceea7a2c5c425afc3.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-cab4eaee78777158a52dca0e9a554519d4a.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-ccdd113bc8eaa609f57b6b27d1f8e094971.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-48d63a5170d2cece2d2e75cdabbd24d0cf9.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-ea526d3b627c7f71a782ceec9b797b1da95.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-bd7d531937d2ff85149f47b4cfa4abd8e33.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-800c466ff5b23af3ababd1500a297fb1fc2.png">
<meta property="article:published_time" content="2020-04-28T14:39:54.000Z">
<meta property="article:modified_time" content="2020-12-07T13:25:07.989Z">
<meta property="article:author" content="cherish-ls">
<meta property="article:tag" content="tree">
<meta property="article:tag" content="B+tree">
<meta property="article:tag" content="B-tree">
<meta property="article:tag" content="索引">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oscimg.oschina.net/oscnet/up-0dcba6005c20f21c6a6e966b9f239b7bc91.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/04/28/B树-B-树分析/"/>





  <title>B树/B+树分析 | cherish</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">cherish</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">返朴归真</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/28/B%E6%A0%91-B-%E6%A0%91%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cherish-ls">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://oscimg.oschina.net/oscnet/up-c01f8b7b68770ed58c420d68072f773a30b.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cherish">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">B树/B+树分析</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-28T22:39:54+08:00">
                2020-04-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91-%E5%A0%86/" itemprop="url" rel="index">
                    <span itemprop="name">树/堆</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/04/28/B%E6%A0%91-B-%E6%A0%91%E5%88%86%E6%9E%90/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2020/04/28/B树-B-树分析/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 浏览
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5.8k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  20
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>目前我们常见的动态查找树主要有：二叉查找树（Binary Search Tree），平衡二叉查找树（Balanced Binary Search Tree），红黑树(Red-Black Tree )，这三者是典型的二叉树结构，利用二分法，可以使其查询的时间复杂度为O(log2N)，即与树的深度相关。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-0dcba6005c20f21c6a6e966b9f239b7bc91.png" alt=""></p>
<p>但二叉树一个节点中包含有一个元素，和指向两个子节点的指针，在现实生活中，未免有些太“奢侈”了。为了降低树的深度，提高查找效率，我们完全可以采用多叉树结构（由于树节点元素数量是有限的，自然该节点的子树数量也就是有限的）来得到一棵更加“矮胖”的树，以适应我们日益增长的数据量和查询性能要求，在这种背景下，B树和他的亲戚们应运而生。</p>
<h1 id="1-B树"><a href="#1-B树" class="headerlink" title="1. B树"></a>1. B树</h1><p>B-tree（B-tree树即B树，B即Balanced，平衡的意思）这棵神奇的树是在Rudolf Bayer, Edward M. McCreight(1970)写的一篇论文《Organization and Maintenance of Large Ordered Indices》中首次提出的（wikipedia中：<a href="http://en.wikipedia.org/wiki/B-tree" target="_blank" rel="noopener" title="http://en.wikipedia.org/wiki/B-tree">http://en.wikipedia.org/wiki/B-tree</a>，阐述了B-tree名字来源以及相关的开源地址）。</p>
<p>B树属于多叉树，又名平衡多路查找树（查找路径不只两个），数据库索引技术里大量使用者B树和B+树的数据结构。</p>
<blockquote>
<p>强调一下，有的文章里出现的B-树，就是B树。因为B树的原英文名称为B-tree，而国内很多人喜欢把B-tree译作B-树，其实，这是个非常不好的直译，很容易让人产生误解。如人们可能会以为B-树是一种树，而B树又是一种一种树。而事实上是，B-tree就是指的B树。</p>
</blockquote>
<p>什么是B树？抛出一大堆概念前，我们先看看他长什么样：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-4ab23420bac3cd2b0d9278357cf27adb754.png" alt=""></p>
<p>这里面，每个字母，都表示一个键值对<code>[key,value]</code>，在关系型数据库的使用场景中，<strong>key一般是索引值</strong>（如果是主键索引的话，那就是ID字段，如果是普通索引，那就是索引对应的字段值，如果是联合索引，可以简单理解为对应多个字段的拼接），<strong>value一般是指向行数据的指针（聚簇索引是这样）或者主键id（非聚簇索引）</strong>；</p>
<p>结合该图，我们可以归纳出B树的规则：</p>
<ol>
<li>节点容量：每个节点，都可以容纳多个键值对。</li>
<li>排序方式：所有节点键值对是按key递增次序排列，并遵循左小右大原则；</li>
<li>层级结构：所有叶子节点均在同一层</li>
<li>子树指针：节点中每个键值对的两侧，都可以放置指针（不一定都有值，可以是null），如果有值，则左边指向左子树（key都比当前key小），右边指向右子树（key都比当前key大）<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-45013c901275cb3600f245d8c75f79590fd.png" alt=""></li>
</ul>
</li>
</ol>
<p>B树种，每个节点最多可以容纳多少个键值对呢？这当然不可能是无限的，在数据结构的定义中，我们引入如下概念来描述：</p>
<ol>
<li>度（degree），在树中，每个节点的子树个数就称为该节点的度。（注意是子树数量，而不是键值对的数量）</li>
<li>阶（order），在树中，一个节点可以拥有的最大子树数量称为阶。（注意是子树数量，而不是键值对的数量）</li>
</ol>
<p>然而上述的规则，只能得到一个B树，却不一定得到一个平衡的B树，极端一点，下图这样的树，它也可以是个B树，但这显然不是我们想要的。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-11c5ae696f01bc75d91131d6ffb2a9dfeeb.png" alt=""></p>
<p>对于一个M阶的平衡的B树，除了上述的规则之外，我们还要加上如下的约束：</p>
<ol>
<li>根节点至少有两颗子树</li>
<li>除根节点和叶子结点外，其他节点至少应该有m/2个子树。</li>
<li>每个节点的键值对数量k，应该<code>m-1≥k≥ceil(m/2)-1</code>。</li>
</ol>
<blockquote>
<p>ceil()是个朝正无穷方向取整的函数 如ceil(1.1)结果为2</p>
</blockquote>
<p>如下图，就是一个5阶的平衡B树，4≥k≥2。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-bb258827f7c35e85442858c7e596f2e2524.png" alt=""></p>
<p>注意，每个节点中的键值对，value都是指向实际data的指针，像下图：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-1ebfa206ae65baff44ff3be6ad33826a6cb.png" alt=""></p>
<h2 id="1-1-B树的查询"><a href="#1-1-B树的查询" class="headerlink" title="1.1 B树的查询"></a>1.1 B树的查询</h2><p><img src="https://oscimg.oschina.net/oscnet/up-a9ce1d66b48acaafe781167587318d9c0f0.png" alt=""></p>
<p>如上图我要从上图中找到E字母，查找流程如下</p>
<ol>
<li><p>获取根节点的关键字进行比较，当前根节点关键字为M，E&lt;M（26个字母顺序），所以往找到指向左边的子节点（二分法规则，左小右大，左边放小于当前节点值的子节点、右边放大于当前节点值的子节点）；</p>
</li>
<li><p>拿到关键字D和G，D&lt;E&lt;G 所以直接找到D和G中间的节点；</p>
</li>
<li><p>拿到E和F，因为E=E 所以直接返回关键字和指针信息（如果树结构里面没有包含所要查找的节点则返回null）；</p>
</li>
</ol>
<h2 id="1-2-B树的插入"><a href="#1-2-B树的插入" class="headerlink" title="1.2 B树的插入"></a>1.2 B树的插入</h2><p>一棵平衡的B树之所以能维持其平衡性，B树的插入和删除算法功不可没，我们先来看下B树如何应对记录的插入。</p>
<p>对于一个m阶的平衡的B树，从上文我们知道，需要保持其每个节点的键值对数量k为：<code>m-1≥k≥ceil(m/2)-1</code>，新的记录一般是插入在叶子节点上，为了保持这个数量和树的平衡性，我们规定：</p>
<ol>
<li>还是按照key递增次序排列，遵循左小右大的原则，在叶子节点上找到新元素的定位。</li>
<li>若插入时，插入的节点元素个数小于m-1，则该元素直接插入。</li>
<li>否则，将该节点的元素分裂。</li>
</ol>
<p>我们下面以5阶B树为例子，在5阶B树中，结点最多有4个键值对，最少有2个键值对。（下面我们把键值对称为元素）</p>
<ol>
<li>插入树的第一批元素，A，C，G，N，因为数量不超过4，所以刚好能放在一个节点里面：<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-0af274b789dd1f16f170fc83968f07eb356.png" alt=""></li>
</ul>
</li>
<li>当试着插入H时，节点发现空间不够（4阶B树，一个节点最多放4个元素），以致将其<strong>分裂</strong>成2个节点，移动中间元素G上移到新的根节点中，比G元素小的A和C留在当前节点中，而比G元素大的H和N放置新的其右邻居节点中。如下图：<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-cbd8d929ac323b575bf7d75becdfacf44a8.png" alt=""></li>
</ul>
</li>
<li>接下来插入E，K，Q，因为都不触及上界，所以不需要任何分裂操作<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-e9af49d254a060491b461731484c692dc6c.png" alt=""></li>
</ul>
</li>
<li>插入M（在K和N之间）就会导致一次分裂，注意M恰好是中间关键字元素，以致向上移到父节点中<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-a90c8160743bcd04518ca54bb903db6c700.png" alt=""></li>
</ul>
</li>
<li>插入F，W，L，T不需要任何分裂操作<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-d0df1d26e4a539e449f182883079b6e000f.png" alt=""></li>
</ul>
</li>
<li>插入Z时，最右的叶子节点空间满了，需要进行分裂操作，中间元素T上移到父节点中。<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-c901bb0b11e87bc7ce2f19966758b8f74e2.png" alt=""></li>
</ul>
</li>
<li>插入D时，导致最左边的叶子节点被分裂，D恰好也是中间元素，上移到父节点中，然后字母P，R，X，Y陆续插入不需要任何分裂操作<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-33e4f1cbd03fa5a95705511b5fa003df45c.png" alt=""></li>
</ul>
</li>
<li>最后，当插入S时，含有[N,P,Q,R]的节点需要分裂，把中间元素Q上移到父节点中，但是情况来了，父节点中空间已经满了，无法加入Q了，所以也要进行分裂，将父节点中的中间元素M上移到新形成的根结点中。<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-6d015f6544f424661fdc345f7b017b3bbf4.png" alt=""></li>
</ul>
</li>
</ol>
<h2 id="1-3-B树的删除"><a href="#1-3-B树的删除" class="headerlink" title="1.3 B树的删除"></a>1.3 B树的删除</h2><p>B树的删除比插入要更复杂一些，但总体而言，为了保持树的平衡，还是有以下的原则：</p>
<p>分为如下几种情况：</p>
<ol>
<li><p>要删除的记录d在叶子节点上</p>
<ul>
<li><p>1.1  如果该节点删除了该元素d后元素数量k仍然大于等于ceil(m/2)-1</p>
<blockquote>
<p>那么这种情况最简单，直接删除元素d和其对应的指针即可。这种情况，我们称为<strong>元素直删</strong></p>
</blockquote>
</li>
<li><p>1.2 如果该节点删除了元素d后k小于ceil(m/2)-1，那么这时也分两种情况</p>
<ul>
<li><p>1.2.1 与该节点相邻的兄弟节点，有任一节点，其k大于等于ceil(m/2)。（这表示即便k-1，也仍然大于等于ceil(m/2)-1）</p>
<blockquote>
<p>那么这种情况，我们应该向兄弟节点，借一个元素过来，但不是简单的借，因为要保证B树元素从左到右递增的顺序，故而借法是有门道的，我们暂称为<strong>元素租借</strong>。</p>
</blockquote>
</li>
<li><p>1.2.2 与该节点相邻的兄弟节点，都没有多余的元素可以借出去，即其k都等于ceil(m/2)-1</p>
<blockquote>
<p>那么这种情况，删除元素d后，我们应该和兄弟节点合并，这样k1=ceil(m/2)-1-1和k2=ceil(m/2)-1,k1+k2还是小于m，符合B树的平衡约束（这也是为什么k的下限是ceil(m/2)-1的原因），这种情况，我们称为<strong>元素合并</strong></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>要删除的记录d在非叶子节点上</p>
<ul>
<li><blockquote>
<p>那么这种情况，我们应该在d指针指向的子树中找到一个元素f来替代d的位置，同时在子树中删除f（如果f的删除引起了<code>m-1≥k≥ceil(m/2)-1</code>的不满足，那么操作方法按照<code>情况1：要删除的记录d在叶子节点上</code>来处理），这种情况，我们称为<strong>元素顶替</strong></p>
</blockquote>
</li>
</ul>
</li>
</ol>
<p>总结之后，我们发现，删除记录的核心操作，就在<strong>元素直删</strong>，<strong>元素租借</strong>，<strong>元素合并</strong>和<strong>元素顶替</strong>这四个操作步骤之间，直删元素比较简单，我们不多说，剩下的，三种操作步骤，我们来理一下：</p>
<p>我们有一个5阶的b树，原始状态长这样：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-dbe6fba9b6d67cc51aa034d00863633519b.png" alt=""></p>
<ol>
<li><strong>元素顶替</strong><ul>
<li>我们先反着来，先删除位于非叶子节点上的记录27</li>
<li>这时候，需要从27的左右指针指向的两棵子树中找元素来置换27，左子树是<code>23,24,26</code>，右子树是<code>28,29</code></li>
<li>为了保证b树从左到右增序的顺序，所以有资格被置换的元素只有26和28。</li>
<li>b树删除的大部分实现，都是采用<strong>后继顶替优先原则</strong>，即27被删除，则拿27的后继28来顶替。</li>
<li>将28元素替到27原来的位置，同时将右子节点中的28删去，如下图：<br><img src="https://oscimg.oschina.net/oscnet/up-85fdbd40c1a754b1940a8c3edf02992f702.png" alt=""></li>
<li><code>28,29</code>节点删去28之后，显然k小于了ceil(m/2)-1=2，这时候，<code>29</code>有两个兄弟节点：<code>23,24,26</code>和<code>31,32</code></li>
<li>如果<code>29</code>向<code>23,24,26</code>求援，就会引发<strong>元素租借</strong>的情况，反之，向<code>31,32</code>求援，就会引发<strong>元素合并</strong>的情况</li>
</ul>
</li>
</ol>
<blockquote>
<p>其实向哪边求援都可以，实现不同，最终最多导致B树的形态会稍不一样，但肯定的是，他们都是平衡的树。</p>
</blockquote>
<ol start="2">
<li><p><strong>元素租借</strong></p>
<ul>
<li>重申一下， <strong>元素顶替</strong>操作结束后，B树长这样</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-85fdbd40c1a754b1940a8c3edf02992f702.png" alt=""></li>
<li>假如<code>29</code>向<code>23,24,26</code>求援，那么<code>23,24,26</code>明显有“余粮”，就会触发租借元素的情况。</li>
<li><code>23,24,26</code>不能直接将任意一个元素放到<code>29</code>中来，<code>23,24,26</code>任意元素都比28元素小，如果放置在28元素的右子节点上，就违背了左小右大的原则。</li>
<li>那怎么借呢？既然两个当事人<code>23,24,26</code>和<code>29</code>分别是28元素的左右子节点，那就让28元素进入<code>29</code>，26元素替代28元素的位置，这样就皆大欢喜了。</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-7e820bffda4330e8a49b4f6dcfe7761c2ad.png" alt=""></li>
</ul>
</li>
<li><p><strong>元素合并</strong></p>
<ul>
<li>重申一下， <strong>元素顶替</strong>操作结束后，B树长这样</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-85fdbd40c1a754b1940a8c3edf02992f702.png" alt=""></li>
<li>假如<code>29</code>向<code>31,32</code>求援，那么<code>31,32</code>明显没有“余粮”，那么就会引发<strong>元素合并</strong>的情况。</li>
<li><code>29</code>和<code>31,32</code>不能直接合并，因为30元素还在父节点上，按照左小右大的原则，30元素一定要在29元素和31元素之间</li>
<li>那怎么合并呢？既然两个当事人 <code>29</code>和<code>31,32</code>分别是30元素的左右子节点，那就让30元素与<code>29</code>和<code>31,32</code>一起加入合并，这样就皆大欢喜了。</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-ff3953493f06bb17b382e8bc1a3d38adf6a.png" alt=""></li>
</ul>
</li>
</ol>
<hr>
<p>这就结束了么？不是的，大家注意到没有，合并元素操作，其实相当于在父节点中删去了一个元素，如果这一次的删除，导致了父节点的元素数量小于ceil(m/2)-1怎么办？</p>
<p>我们来看这种情况，现在我们的原图长这样：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-ff3953493f06bb17b382e8bc1a3d38adf6a.png" alt=""></p>
<ol>
<li><p>接着删除key为40的记录，删除后结果如下图所示。</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-7459240a23aa224c93bbfb382960001664c.png" alt=""></li>
</ul>
</li>
<li><p>删完后就剩39一个元素了，没话说，找个兄弟节点合并呗，合并结果如下，可以看到，对于原来的<code>36,41</code>节点来说，相当于36元素被删除了，导致<code>41</code>节点不符合约束。</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-752976b81e53a4afd84139727851c16e5a3.png" alt=""></li>
</ul>
</li>
<li><p>这时候，其实有两种策略</p>
<ul>
<li>一种是采用<strong>元素顶替</strong>操作：删了我的36，那就拿39顶替呗。</li>
<li>还有一种是向兄弟节点<code>22,26</code>求援，这时要根据兄弟节点的“余粮”情况，酌情触发<strong>元素合并</strong>或者<strong>元素租借</strong>。</li>
<li>那到底是采用第一种方案好还是第二种方案好呢？</li>
<li><strong>答案是第二种，因为第二种情况，可能触发元素合并</strong>，只要触发元素合并，就有可能降低树的高度，使得B树不仅平衡，而且更加“矮胖”，使查找效率更高。</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-71b65cb9f29444227d3fbb8a8e9b84d9130.png" alt=""></li>
</ul>
</li>
</ol>
<blockquote>
<p>所以总结一句话，因为元素合并导致的父节点元素数量不符合约束，执行策略时，优先向可能触发<strong>元素合并</strong>的方向靠拢，有利于使树的高度降低。</p>
</blockquote>
<h2 id="1-4-B树的优点"><a href="#1-4-B树的优点" class="headerlink" title="1.4 B树的优点"></a>1.4 B树的优点</h2><p>如果经常访问的数据离根节点很近，而B树的非叶子节点本身存有关键字其数据的地址，所以这种数据检索的时候会要比B+树快。</p>
<h1 id="2-B-树"><a href="#2-B-树" class="headerlink" title="2. B+树"></a>2. B+树</h1><p>B-Tree有许多变种，其中最常见的是B+Tree，例如MySQL就普遍使用B+Tree实现其索引结构。</p>
<p>B+树是B树的一个升级版，相对于B树来说B+树更充分的利用了节点的空间，让查询速度更加稳定，其速度完全接近于二分法查找。为什么说B+树查找的效率要比B树更高、更稳定；我们先看看两者的区别：</p>
<ol>
<li>B+树的<strong>非叶子节点不保存关键字记录的指针</strong>，只进行数据索引，这样使得B+树每个非叶子节点所能保存的关键字大大增加；</li>
<li>B+树<strong>叶子节点保存了父节点的所有关键字记录的指针</strong>，所有数据地址必须要到叶子节点才能获取到。所以每次数据查询的次数都一样；</li>
<li>B+树<strong>叶子节点的关键字从小到大有序排列，左边结尾数据都会保存右边节点开始数据的指针</strong>。</li>
</ol>
<p><img src="https://oscimg.oschina.net/oscnet/up-d16ff524d920d5b2a808b41aedbd6c256b5.png" alt=""></p>
<h2 id="2-1-B-树的插入"><a href="#2-1-B-树的插入" class="headerlink" title="2.1 B+树的插入"></a>2.1 B+树的插入</h2><p>B+树的插入操作和B树的插入操作大同小异，即都满足：</p>
<ol>
<li>还是按照key递增次序排列，遵循左小右大的原则，在叶子节点上找到新元素的定位。</li>
<li>若插入时，插入的节点元素个数小于m-1，则该元素直接插入。</li>
<li>否则，将该节点的元素分裂。</li>
</ol>
<p>但B+树的叶子节点，会包含所有的元素（不像B树，有些元素在叶子节点上，有些元素在非叶子节点上），所以插入操作有一些许的差异。</p>
<p>我们下面还是以5阶B+树为例子，在5阶B+树中，结点最多有4个元素，最少有2个元素。</p>
<ol>
<li><p>空树中插入5：</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-533ee1cfa033ba1ce6dd6e4fc9af90c2d7e.png" alt=""></li>
</ul>
</li>
<li><p>依次插入8，10，15：</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-dd36b3e0400e00aea397caac07683e5014a.png" alt=""></li>
</ul>
</li>
<li><p>插入16，</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-22a6217fb1ebcb7245d74fb5b4b92659a2e.png" alt=""></li>
<li>这时超过了关键字的个数限制，所以要进行分裂。在叶子结点分裂时，分裂出来的左节点2个记录，右节点3个记录，中间key成为索引结点中的key，分裂后当前节点指向了父节点（根节点）。结果如下图所示：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-f03ece76b29d638675bbc7c937b7b34ee73.png" alt=""></li>
<li><blockquote>
<p>当然我们还有另一种分裂方式，给左结点3个记录，右结点2个记录，此时索引结点中的key就变为15。不同实现而已，本质差不多。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>继续插入17</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-d0a8d9b2c71ffd1a692dd88fc44ec6bca10.png" alt=""></li>
</ul>
</li>
<li><p>插入18，插入后当前节点的关键字个数大于5，进行分裂。</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-0ea3104f7c970ceb6bba681de50de17f63d.png" alt=""></li>
<li>分裂成两个节点，左节点2个记录，右节点3个记录，关键字16进位到父节点（索引类型）中，将当前结点的指针指向父结点。</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-f92dccd11f24b2ddbb8200c36386da6375d.png" alt=""></li>
</ul>
</li>
<li><p>插入若干数据后：</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-40118bf9f9ac718d72d7512dab23e9e83d7.png" alt=""></li>
</ul>
</li>
<li><p>在上图中插入7，结果如下图所示</p>
<ul>
<li><img src="https://oscimg.oschina.net/oscnet/up-d9bcc83498f32e2b879edfef356dafcaa62.png" alt=""></li>
<li>此时当前节点的关键字个数超过4，需要分裂。左节点2个记录，右节点3个记录。分裂后关键字7进入到父节点中，将当前结点的指针指向父节点</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-24fbbe8a4fa67721cc8a833a73f4d097ec8.png" alt=""></li>
<li>当前结点的关键字个数超过4，需要继续分裂。左结点2个关键字，右结点2个关键字，关键字16进入到父结点中，将当前结点指向父结点，结果如下图所示：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-c2532b2da7da86911713593d79715fbc13f.png" alt=""></li>
</ul>
</li>
</ol>
<h2 id="2-2-B-树的删除"><a href="#2-2-B-树的删除" class="headerlink" title="2.2 B+树的删除"></a>2.2 B+树的删除</h2><p>回顾上文的B树的删除，我们知道B树有元素直删，元素租借，元素合并和元素顶替这四个操作场景，B+树与B树大同小异，几乎没有区别。只不过B+树没有元素顶替</p>
<blockquote>
<p>B+树没有元素顶替，是因为B+树的叶子节点，有所有的键值对信息，所以不存在删除的键值对不是叶子节点的情况。</p>
</blockquote>
<p>我们下面还是以5阶B+树为例子，在5阶B+树中，结点最多有4个元素，最少有2个元素。</p>
<p>初始状态如下：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-7a9ce40e582bd61f21ceea7a2c5c425afc3.png" alt=""></p>
<ol>
<li><p><strong>元素直删</strong></p>
<ul>
<li>在上图基础上删除22</li>
<li>删除后叶子结点中key的个数大于等于2，删除结束</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-cab4eaee78777158a52dca0e9a554519d4a.png" alt=""></li>
</ul>
</li>
<li><p><strong>元素租借</strong></p>
<ul>
<li>在元素直删完了之后的基础上，再删除15，得到下图：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-ccdd113bc8eaa609f57b6b27d1f8e094971.png" alt=""></li>
<li>删除后当前结点只有一个元素，不满足条件，而兄弟结点有三个元素（注意，当前节点的兄弟节点只有<code>[7,8,9]</code>），则可以向兄弟节点借一个元素过来。当然，根据排序原则，只能借9。</li>
<li>9元素去到<code>[10]</code>节点之后，那么索引也要相应的更改，否则也不满足排序原则，即原来非叶子节点中的10改为9：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-48d63a5170d2cece2d2e75cdabbd24d0cf9.png" alt=""></li>
</ul>
</li>
<li><p><strong>元素合并</strong></p>
<ul>
<li>在元素租借完了之后，我们再删除7，删除后的结果如下图所示：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-ea526d3b627c7f71a782ceec9b797b1da95.png" alt=""></li>
<li>可以看到，删除完了以后，当前节点元素个数小于2，且左右节点的元素数量都是2，即都没有富余的元素。</li>
<li>这时候我们选择元素合并，可以选择和左兄弟合并，也可以和右兄弟合并，这里我们选择左兄弟。</li>
<li>合并的时候我们前文说过，为了保证顺序，兄弟节点还会将父节点中对应的元素一起纳入合并，即<code>[5,6]</code>、<code>[8]</code>会和父节点中的7一起合并，不过这次删除的是7，所以7不存在了，故而，得到：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-bd7d531937d2ff85149f47b4cfa4abd8e33.png" alt=""></li>
<li>不过注意，因为7索引的删除，导致了父节点只剩下了一个元素9，这显然不符合数量约束。</li>
<li><code>[9]</code>的兄弟节点也没有余粮，则只能拉着父节点的元素16，和右兄弟<code>[18,20]</code>合并。得到下图：</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-800c466ff5b23af3ababd1500a297fb1fc2.png" alt=""></li>
</ul>
</li>
</ol>
<blockquote>
<p>其实说是没有元素顶替，但为了便于理解，也可以用元素顶替的思路来看最后这个删除操作：<br>1.因为删除的是7，7也在非叶子节点上，所以7删除了，要从子节点中找一个元素来顶替。<br>2.不论是8顶替上去还是6顶替上去，都会使得有个子节点数量不符合，触发元素合并。<br>3.这时候左右节点的元素+他们关联的父节点的元素合并，得到的结果，还是<code>[5,6,8]</code></p>
</blockquote>
<h2 id="2-3-B-树的优点"><a href="#2-3-B-树的优点" class="headerlink" title="2.3 B+树的优点"></a>2.3 B+树的优点</h2><ol>
<li><p>B+树的层级更少：相较于B树，B+每个非叶子节点存储的元素数更多（因为B+树的非叶子节点不存data，相同容量下可容纳的元素更多），使得B+树相对于B树更加“矮胖”，即B+树的层级更少<strong>所以查询数据更快</strong>；</p>
</li>
<li><p>B+树查询速度更稳定：B+所有关键字数据地址都存在叶子节点上，所以每次查找的次数都相同所以查询速度要比B树更稳定。不像B树，有时候在非叶子节点上找到，那就相对快，有时候在叶子节点上找到，那就相对慢。</p>
</li>
<li><p>B+树天然具备排序功能：B+树所有的叶子节点数据构成了一个有序链表，在查询大小区间的数据时候更方便，数据紧密性很高，缓存的命中率也会比B树高。</p>
</li>
<li><p>B+树全节点遍历更快：B+树遍历整棵树只需要遍历所有的叶子节点即可，，而不需要像B树一样需要对每一层进行遍历，这有利于数据库做全表扫描。</p>
</li>
</ol>
<h2 id="2-4-为什么B-树比B树更适合做数据库索引？"><a href="#2-4-为什么B-树比B树更适合做数据库索引？" class="headerlink" title="2.4 为什么B+树比B树更适合做数据库索引？"></a>2.4 为什么B+树比B树更适合做数据库索引？</h2><p>其实理由也正是基于上诉的优势而言，不过我们把语义按照数据库索引适配性的角度转化一下：</p>
<ol>
<li><p>B+树的磁盘读写代价更低：B+树的内部节点并没有指向关键字具体信息的指针，因此其内部节点相对B树更小，如果把所有同一内部节点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多，一次性读入内存的需要查找的关键字也就越多，相对IO读写次数就降低了。</p>
</li>
<li><p>B+树的查询效率更加稳定：由于非叶节点并不是最终指向文件内容的节点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根节点到叶子节点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</p>
</li>
<li><p>对范围查询的适配性好：在数据库中基于范围的查询是非常频繁的，B树不支持这样的操作或者说效率太低。而B+树只需要去遍历叶子节点的链表，就可以实现整棵树的范围查询。</p>
</li>
<li><p>全节点遍历更快：由于B+树的数据都存储在叶子节点中，分支节点均为索引，方便扫库，只需要扫一遍叶子节点即可，但是B树因为其分支结点同样存储着数据，我们要找到具体的数据，需要进行一次中序遍历按序来扫，所以B+树更加适合在区间查询的情况，所以通常B+树用于数据库索引。</p>
</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/tree/" rel="tag"># tree</a>
          
            <a href="/tags/B-tree/" rel="tag"># B+tree</a>
          
            <a href="/tags/B-tree/" rel="tag"># B-tree</a>
          
            <a href="/tags/%E7%B4%A2%E5%BC%95/" rel="tag"># 索引</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/09/Redis%E7%9A%84%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F-%E7%BC%93%E5%AD%98%E9%A2%84%E7%83%AD-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BB%8B%E7%BB%8D/" rel="next" title="Redis的缓存雪崩/缓存穿透/缓存预热+布隆过滤器介绍">
                <i class="fa fa-chevron-left"></i> Redis的缓存雪崩/缓存穿透/缓存预热+布隆过滤器介绍
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/05/06/MySQL%E6%A0%B8%E5%BF%83%E8%A6%81%E7%82%B9%E6%B1%87%E6%80%BB/" rel="prev" title="MySQL核心要点汇总">
                MySQL核心要点汇总 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div class="ds-thread" data-thread-key="2020/04/28/B树-B-树分析/"
           data-title="B树/B+树分析" data-url="http://yoursite.com/2020/04/28/B%E6%A0%91-B-%E6%A0%91%E5%88%86%E6%9E%90/">
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://oscimg.oschina.net/oscnet/up-c01f8b7b68770ed58c420d68072f773a30b.png"
                alt="cherish-ls" />
            
              <p class="site-author-name" itemprop="name">cherish-ls</p>
              <p class="site-description motion-element" itemprop="description">纸上得来终觉浅</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">66</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">98</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="git@github.com:cherish-ls/cherish-ls.github.io.git" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-B树"><span class="nav-text">1. B树</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-B树的查询"><span class="nav-text">1.1 B树的查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-B树的插入"><span class="nav-text">1.2 B树的插入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-B树的删除"><span class="nav-text">1.3 B树的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-B树的优点"><span class="nav-text">1.4 B树的优点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-B-树"><span class="nav-text">2. B+树</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-B-树的插入"><span class="nav-text">2.1 B+树的插入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-B-树的删除"><span class="nav-text">2.2 B+树的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-B-树的优点"><span class="nav-text">2.3 B+树的优点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-为什么B-树比B树更适合做数据库索引？"><span class="nav-text">2.4 为什么B+树比B树更适合做数据库索引？</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cherish-ls</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">447.2k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 访问总量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"cherish"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'TQhjcmooFXWGQ3qgqUroDKsD-gzGzoHsz',
        appKey: 'zjA9PvG5eljY1JErig8WVQQD',
        placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
