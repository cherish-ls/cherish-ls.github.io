<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="纸上得来终觉浅，绝知此事要躬行" />










<meta name="description" content="前言我们在日常的开发和维护工作中，免不了需要对JAVA程序进行监控、调优以及问题排查。 给一个系统定位问题的时候，知识、经验是关键基础，数据是依据，工具是运用知识处理数据的手段。这里说的数据包括∶运行日志、异常堆栈、GC日志、线程快照（thread dump&#x2F;java core文件）、堆转储快照（heap dump&#x2F;hprof文件）等。 经常使用适当的监控和分析工具可以加快我们分析数据、定位解决问">
<meta property="og:type" content="article">
<meta property="og:title" content="JAVA监控和调优工具操作指南">
<meta property="og:url" content="http://yoursite.com/2020/11/09/JAVA%E7%9B%91%E6%8E%A7%E5%92%8C%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97%EF%BC%88%E6%AD%A4%E5%9D%91%E6%9C%AA%E5%A1%AB%EF%BC%89/index.html">
<meta property="og:site_name" content="cherish">
<meta property="og:description" content="前言我们在日常的开发和维护工作中，免不了需要对JAVA程序进行监控、调优以及问题排查。 给一个系统定位问题的时候，知识、经验是关键基础，数据是依据，工具是运用知识处理数据的手段。这里说的数据包括∶运行日志、异常堆栈、GC日志、线程快照（thread dump&#x2F;java core文件）、堆转储快照（heap dump&#x2F;hprof文件）等。 经常使用适当的监控和分析工具可以加快我们分析数据、定位解决问">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-3bcb4835de13ba36eadb8b19630a824973f.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-2c4c5b7173045d72f971624168e8cb70e73.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-16840d91b4bfcceb7cfb57aacb4b7f4e3b3.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-62cd627d9ee93c1fe76cb2474e5b75dbba4.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-a56eedc39b84a2f57451b3f7c5172fc7d32.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-7bf94c1599ea21d939c982c152f76125f6b.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-17e285a83ecb8b6d0aedd6efe5b5e3c91eb.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-3d8f5e1a88b7882699b13e00bf379611362.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-4ea5b8737fb9011c4030aa2c2d57e242811.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-9379bda74d5e129a548ffe7cfd724167ab1.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-adb15a8f73ef408099cbee2110bc9879f02.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-b79b41e6b74426fa258da530dcfd256847b.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-e4bb4b35ac7fed34239fc2785067e3e7574.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-35d57224bda3c1ce43daa4eed065ae0e0a2.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-f2d9d9dfa286b51df4e3575ae27423cd93e.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-992e8f7a9ced2b305f6a16d2184c77a5686.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-67f49e0ba5cdbfe3ac02c26aaa396f42648.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-4f07b6ea610226208c0791082ab70ce0689.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-2e60bd64a892a063c76037f7fbaa5ceb196.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-452f7c3598597bea5efd6a2596c52f13228.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-6c7772ec1a693d7702905d45950f2a661d0.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-c3cb2a0c165067a785f1e82eac8e86d5d6a.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-ba28e19bd75231959a868d3fa24644cb3ef.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-be84ee14d1f8990973fbfffa1f014827082.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-44a6d03fa59ee3d179a5352c3f8c17c15b7.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-fcb6eca9c1dd7c229a8833e66412f56fe94.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-b99529bc7810a586ef2d23f874cc9519a9f.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-e9c3e67acc4d4e817d3c206512b067d181e.png">
<meta property="og:image" content="https://oscimg.oschina.net/oscnet/up-918c3cea79f7a31ccdf12b7a0aa75eb461a.png">
<meta property="article:published_time" content="2020-11-09T12:39:02.000Z">
<meta property="article:modified_time" content="2020-11-09T12:49:07.401Z">
<meta property="article:author" content="cherish-ls">
<meta property="article:tag" content="纸上得来终觉浅，绝知此事要躬行">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oscimg.oschina.net/oscnet/up-3bcb4835de13ba36eadb8b19630a824973f.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/11/09/JAVA监控和调优工具操作指南（此坑未填）/"/>





  <title>JAVA监控和调优工具操作指南 | cherish</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">cherish</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">返朴归真</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/09/JAVA%E7%9B%91%E6%8E%A7%E5%92%8C%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97%EF%BC%88%E6%AD%A4%E5%9D%91%E6%9C%AA%E5%A1%AB%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cherish-ls">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://oscimg.oschina.net/oscnet/up-c01f8b7b68770ed58c420d68072f773a30b.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cherish">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JAVA监控和调优工具操作指南</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-09T20:39:02+08:00">
                2020-11-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/11/09/JAVA%E7%9B%91%E6%8E%A7%E5%92%8C%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97%EF%BC%88%E6%AD%A4%E5%9D%91%E6%9C%AA%E5%A1%AB%EF%BC%89/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2020/11/09/JAVA监控和调优工具操作指南（此坑未填）/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 浏览
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  22
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>我们在日常的开发和维护工作中，免不了需要对JAVA程序进行监控、调优以及问题排查。</p>
<p>给一个系统定位问题的时候，知识、经验是关键基础，数据是依据，工具是运用知识处理数据的手段。这里说的数据包括∶运行日志、异常堆栈、GC日志、线程快照（thread dump/java core文件）、堆转储快照（heap dump/hprof文件）等。</p>
<p>经常使用适当的监控和分析工具可以加快我们分析数据、定位解决问题的速度，但在学习工具前，也应当意识到工具永远都是知识技能的一层包装，没有什么工具是”秘密武器”，不可能学会了就能包治百病。</p>
<h2 id="进程id的获取"><a href="#进程id的获取" class="headerlink" title="进程id的获取"></a>进程id的获取</h2><p>许多工具或者命令需要用到java进程的进程id，有必要回顾一下。</p>
<blockquote>
<ol>
<li>查看当前运行的所有的java进程：<code>ps -ef|grep java</code>；</li>
<li>准确获取定位到tomcat下正在运行的java进程的PID命令：<code>ps -ef|grep java | grep catalina | awk &#39;{print $2}&#39;</code></li>
<li>准确定位到tomcat下正在运行的java进程相关信息：<code>ps -ef|grep java | grep catalina</code>.</li>
</ol>
</blockquote>
<h2 id="jinfo-jmap访问受限的解决"><a href="#jinfo-jmap访问受限的解决" class="headerlink" title="jinfo/jmap访问受限的解决"></a>jinfo/jmap访问受限的解决</h2><p>一般情况下，我们使用jinfo命令，可能会遇到如下的报错：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-3bcb4835de13ba36eadb8b19630a824973f.png" alt=""></p>
<p>这是因为新版的Linux系统加入了 ptrace-scope 机制,该机制的目的是防止用户访问正在执行的进程的内存，但是如jinfo,jmap这些调试类工具本身就是利用ptrace来获取执行进程的内存等信息。</p>
<p><strong>解决：</strong></p>
<ol>
<li>临时解决，该方法在下次重启前有效：<code>echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope</code></li>
<li>永久解决，直接修改内核参数：<code>sudo vi /etc/sysctl.d/10-ptrace.conf</code><ul>
<li>编辑这行: <code>kernel.yama.ptrace_scope = 1</code></li>
<li>修改为: <code>kernel.yama.ptrace_scope = 0</code></li>
<li>重启系统，使修改生效。</li>
</ul>
</li>
</ol>
<blockquote>
<p>参数名：kernel.yama.ptrace_scope（值为１：表示禁止用户访问正在执行的进程的内存；０表示可以访问）</p>
</blockquote>
<h1 id="1-程序数据"><a href="#1-程序数据" class="headerlink" title="1. 程序数据"></a>1. 程序数据</h1><h2 id="1-1-【命令】jps（显示java进程）"><a href="#1-1-【命令】jps（显示java进程）" class="headerlink" title="1.1 【命令】jps（显示java进程）"></a>1.1 【命令】jps（显示java进程）</h2><p>jps (Java Virtual Machine Process Status Tool)，是java提供的一个显示当前所有JAVA进程pid的命令，适合在linux/unix平台上简单察看当前java进程的一些简单情况。</p>
<p>我们常常会用到unix系统里的ps命令，这个命令主要是用来显示当前系统的进程情况，有哪些进程以及进程id。</p>
<p><strong>jps就是java程序版本的ps命令，它的作用是显示当前系统的java进程情况及进程id。</strong></p>
<p><strong>格式：<code>jps [-命令选项]</code></strong></p>
<p><img src="https://oscimg.oschina.net/oscnet/up-2c4c5b7173045d72f971624168e8cb70e73.png" alt=""></p>
<h3 id="1-1-1-jps的选项"><a href="#1-1-1-jps的选项" class="headerlink" title="1.1.1 jps的选项"></a>1.1.1 jps的选项</h3><p>jps默认只会打印进程id和java类名，如果要更具体的信息，则要借助更多的选项：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-16840d91b4bfcceb7cfb57aacb4b7f4e3b3.png" alt=""></p>
<ol>
<li><p>jps -q</p>
<ul>
<li>只显示pid，不显示class名称,jar文件名和传递给main方法的参数</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-62cd627d9ee93c1fe76cb2474e5b75dbba4.png" alt=""></li>
</ul>
</li>
<li><p>jps -m</p>
<ul>
<li>输出传递给main方法的参数，在嵌入式jvm上可能是null</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-a56eedc39b84a2f57451b3f7c5172fc7d32.png" alt=""></li>
</ul>
</li>
<li><p>jps -l</p>
<ul>
<li>输出应用程序main class的完整package名或者应用程序的jar文件完整路径名</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-7bf94c1599ea21d939c982c152f76125f6b.png" alt=""></li>
</ul>
</li>
<li><p>jps -v</p>
<ul>
<li>输出传递给JVM的参数</li>
<li><img src="https://oscimg.oschina.net/oscnet/up-17e285a83ecb8b6d0aedd6efe5b5e3c91eb.png" alt=""></li>
</ul>
</li>
<li><p>jps -V</p>
<ul>
<li>隐藏输出传递给JVM的参数</li>
</ul>
</li>
</ol>
<h2 id="1-2-【命令】jinfo（显示JVM配置信息）"><a href="#1-2-【命令】jinfo（显示JVM配置信息）" class="headerlink" title="1.2 【命令】jinfo（显示JVM配置信息）"></a>1.2 【命令】jinfo（显示JVM配置信息）</h2><p>jinfo 是 JDK 自带的命令，可以用来查看正在运行的 java 应用程序的扩展参数，包括Java System属性和JVM命令行参数；也可以动态的修改正在运行的JVM一些参数。当系统崩溃时，jinfo也可以从core文件里面知道崩溃的Java应用程序的配置信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">    jinfo [option] &lt;pid&gt;</span><br><span class="line">        (to connect to running process)</span><br><span class="line">    jinfo [option] &lt;executable &lt;core&gt;</span><br><span class="line">        (to connect to a core file)</span><br><span class="line">    jinfo [option] [server_id@]&lt;remote server IP or hostname&gt;</span><br><span class="line">        (to connect to remote debug server)</span><br><span class="line"></span><br><span class="line">where &lt;option&gt; is one of:</span><br><span class="line">    -flag &lt;name&gt;         to print the value of the named VM flag</span><br><span class="line">    -flag [+|-]&lt;name&gt;    to enable or disable the named VM flag</span><br><span class="line">    -flag &lt;name&gt;&#x3D;&lt;value&gt; to set the named VM flag to the given value</span><br><span class="line">    -flags               to print VM flags</span><br><span class="line">    -sysprops            to print Java system properties</span><br><span class="line">    &lt;no option&gt;          to print both of the above</span><br><span class="line">    -h | -help           to print this help message</span><br></pre></td></tr></table></figure>

<p><strong>格式：<code>jinfo [-命令选项] &lt;pid&gt;</code> 或 <code>jinfo [-命令选项] &lt;executable core&gt;</code> 或 <code>jinfo [-命令选项] [server_id@] &lt;remote ip or hostname&gt;</code></strong></p>
<ul>
<li><code>pid</code>：对应jvm的进程id</li>
<li><code>executable core</code>：产生core dump文件</li>
<li><code>remote server IP or hostname</code>：远程调试服务的ip或者hostname</li>
<li><code>server-id</code>：唯一id,假如一台主机上多个远程debug服务;</li>
</ul>
<blockquote>
<p>Javacore，也可以称为“threaddump”或是“javadump”，它是 Java 提供的一种诊断特性，能够提供一份可读的当前运行的 JVM 中线程使用情况的快照。即在某个特定时刻，JVM 中有哪些线程在运行，每个线程执行到哪一个类，哪一个方法。<br>应用程序如果出现不可恢复的错误或是内存泄露，就会自动触发 Javacore 的生成。</p>
</blockquote>
<p>jinfo工具特别强大，有众多的可选命令选项，比如：</p>
<h3 id="1-2-1-输出JVM进程的参数和属性"><a href="#1-2-1-输出JVM进程的参数和属性" class="headerlink" title="1.2.1 输出JVM进程的参数和属性"></a>1.2.1 输出JVM进程的参数和属性</h3><p><code>jinfo &lt;pid&gt;</code></p>
<p>不带任何选项的情况下，输出当前 jvm 进程的全部参数和系统属性</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-3d8f5e1a88b7882699b13e00bf379611362.png" alt=""></p>
<h3 id="1-2-2-打印JVM特定参数的值"><a href="#1-2-2-打印JVM特定参数的值" class="headerlink" title="1.2.2 打印JVM特定参数的值"></a>1.2.2 打印JVM特定参数的值</h3><p><code>jinfo -flag &lt;name&gt; &lt;pid&gt;</code></p>
<p>用于打印虚拟机标记参数的值，name表示虚拟机标记参数的名称。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-4ea5b8737fb9011c4030aa2c2d57e242811.png" alt=""></p>
<h3 id="1-2-3-开启或关闭JVM特定参数"><a href="#1-2-3-开启或关闭JVM特定参数" class="headerlink" title="1.2.3 开启或关闭JVM特定参数"></a>1.2.3 开启或关闭JVM特定参数</h3><p><code>jinfo -flag [+|-]&lt;name&gt; &lt;pid&gt;</code></p>
<p>用于开启或关闭虚拟机标记参数。+表示开启，-表示关闭。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-9379bda74d5e129a548ffe7cfd724167ab1.png" alt=""></p>
<h3 id="1-2-4-设置JVM特定参数的值"><a href="#1-2-4-设置JVM特定参数的值" class="headerlink" title="1.2.4 设置JVM特定参数的值"></a>1.2.4 设置JVM特定参数的值</h3><p><code>jinfo -flag &lt;name&gt;=&lt;value&gt; &lt;pid&gt;</code></p>
<p>用于设置虚拟机标记参数，但并不是每个参数都可以被动态修改的。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-adb15a8f73ef408099cbee2110bc9879f02.png" alt=""></p>
<h3 id="1-2-5-打印所有JVM参数"><a href="#1-2-5-打印所有JVM参数" class="headerlink" title="1.2.5 打印所有JVM参数"></a>1.2.5 打印所有JVM参数</h3><p><code>jinfo -flags &lt;pid&gt;</code></p>
<p>打印虚拟机参数。什么是虚拟机参数呢？如<code>-XX:NewSize,-XX:OldSize</code>等就是虚拟机参数。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-b79b41e6b74426fa258da530dcfd256847b.png" alt=""></p>
<h3 id="1-2-6-打印所有系统参数"><a href="#1-2-6-打印所有系统参数" class="headerlink" title="1.2.6 打印所有系统参数"></a>1.2.6 打印所有系统参数</h3><p><code>jinfo -sysprops &lt;pid&gt;</code></p>
<p>打印所有系统参数</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-e4bb4b35ac7fed34239fc2785067e3e7574.png" alt=""></p>
<h1 id="2-快照采集"><a href="#2-快照采集" class="headerlink" title="2. 快照采集"></a>2. 快照采集</h1><h2 id="2-1-【命令】jmap（生成内存快照文件）"><a href="#2-1-【命令】jmap（生成内存快照文件）" class="headerlink" title="2.1 【命令】jmap（生成内存快照文件）"></a>2.1 【命令】jmap（生成内存快照文件）</h2><p>jmap命令是一个可以输出所有内存中对象的工具，甚至可以将VM 中的heap，以二进制输出成文本。打印出某个java进程（使用pid）内存内的，所有‘对象’的情况（如：产生那些对象，及其数量）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">    jmap [option] &lt;pid&gt;</span><br><span class="line">        (to connect to running process)</span><br><span class="line">    jmap [option] &lt;executable &lt;core&gt;</span><br><span class="line">        (to connect to a core file)</span><br><span class="line">    jmap [option] [server_id@]&lt;remote server IP or hostname&gt;</span><br><span class="line">        (to connect to remote debug server)</span><br><span class="line"></span><br><span class="line">where &lt;option&gt; is one of:</span><br><span class="line">    &lt;none&gt;               to print same info as Solaris pmap</span><br><span class="line">    -heap                to print java heap summary</span><br><span class="line">    -histo[:live]        to print histogram of java object heap; if the &quot;live&quot;</span><br><span class="line">                         suboption is specified, only count live objects</span><br><span class="line">    -clstats             to print class loader statistics</span><br><span class="line">    -finalizerinfo       to print information on objects awaiting finalization</span><br><span class="line">    -dump:&lt;dump-options&gt; to dump java heap in hprof binary format</span><br><span class="line">                         dump-options:</span><br><span class="line">                           live         dump only live objects; if not specified,</span><br><span class="line">                                        all objects in the heap are dumped.</span><br><span class="line">                           format&#x3D;b     binary format</span><br><span class="line">                           file&#x3D;&lt;file&gt;  dump heap to &lt;file&gt;</span><br><span class="line">                         Example: jmap -dump:live,format&#x3D;b,file&#x3D;heap.bin &lt;pid&gt;</span><br><span class="line">    -F                   force. Use with -dump:&lt;dump-options&gt; &lt;pid&gt; or -histo</span><br><span class="line">                         to force a heap dump or histogram when &lt;pid&gt; does not</span><br><span class="line">                         respond. The &quot;live&quot; suboption is not supported</span><br><span class="line">                         in this mode.</span><br><span class="line">    -h | -help           to print this help message</span><br><span class="line">    -J&lt;flag&gt;             to pass &lt;flag&gt; directly to the runtime system</span><br></pre></td></tr></table></figure>

<p>64位机上使用需要使用如下方式：<code>jmap -J-d64 -heap pid</code></p>
<p><strong>格式：<code>jmap [option] &lt;pid&gt;</code> 或 <code>jmap [option] &lt;executable &lt;core&gt;</code> 或 <code>jmap [option] [server_id@]&lt;remote server IP or hostname&gt;</code></strong></p>
<ul>
<li><code>pid</code>：对应jvm的进程id</li>
<li><code>executable core</code>：产生core dump文件</li>
<li><code>remote server IP or hostname</code>：远程调试服务的ip或者hostname</li>
<li><code>server-id</code>：唯一id,假如一台主机上多个远程debug服务;</li>
</ul>
<p>jinfo工具特别强大，有众多的可选命令选项，比如：</p>
<h3 id="2-1-1-输出hprof二进制格式的heap文件"><a href="#2-1-1-输出hprof二进制格式的heap文件" class="headerlink" title="2.1.1 输出hprof二进制格式的heap文件"></a>2.1.1 输出hprof二进制格式的heap文件</h3><p><code>jmap -dump:live,format=b,file=myjmapfile.txt  &lt;pid&gt;</code><br>或<br><code>jmap -dump:file=myjmapfile.hprof,format=b &lt;pid&gt;</code></p>
<p>使用hprof二进制形式,输出jvm的heap内容到文件，file=可以指定文件存放的目录。live子选项是可选的，假如指定live选项，那么只输出活的对象到文件。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-35d57224bda3c1ce43daa4eed065ae0e0a2.png" alt=""></p>
<h3 id="2-1-2-打印正等候回收的对象的信息"><a href="#2-1-2-打印正等候回收的对象的信息" class="headerlink" title="2.1.2 打印正等候回收的对象的信息"></a>2.1.2 打印正等候回收的对象的信息</h3><p><code>jmap -finalizerinfo  &lt;pid&gt;</code></p>
<p>打印正等候回收的对象的信息。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-f2d9d9dfa286b51df4e3575ae27423cd93e.png" alt=""></p>
<p>Number of objects pending for finalization: 0 表示等候回收的对象为0个</p>
<h3 id="2-1-3-打印heap的概要信息"><a href="#2-1-3-打印heap的概要信息" class="headerlink" title="2.1.3 打印heap的概要信息"></a>2.1.3 打印heap的概要信息</h3><p><code>jmap -heap  &lt;pid&gt;</code></p>
<p>打印heap的概要信息，GC使用的算法，heap（堆）的配置及JVM堆内存的使用情况。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-992e8f7a9ced2b305f6a16d2184c77a5686.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Attaching to process ID 2805, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.181-b13</span><br><span class="line"></span><br><span class="line">using thread-local object allocation.</span><br><span class="line">Parallel GC with 4 thread(s)   ##GC 方式</span><br><span class="line"></span><br><span class="line">Heap Configuration:  ##堆配置情况，也就是JVM参数配置的结果[平常说的tomcat配置JVM参数，就是在配置这些]</span><br><span class="line">   MinHeapFreeRatio         &#x3D; 0  ##最小堆使用比例</span><br><span class="line">   MaxHeapFreeRatio         &#x3D; 100  ##最大堆可用比例</span><br><span class="line">   MaxHeapSize              &#x3D; 734003200 (700.0MB)  ##最大堆空间大小</span><br><span class="line">   NewSize                  &#x3D; 21495808 (20.5MB)  ##新生代分配大小</span><br><span class="line">   MaxNewSize               &#x3D; 244318208 (233.0MB)  ##最大可新生代分配大小</span><br><span class="line">   OldSize                  &#x3D; 43515904 (41.5MB)  ##老年代大小</span><br><span class="line">   NewRatio                 &#x3D; 2  ##新生代比例</span><br><span class="line">   SurvivorRatio            &#x3D; 8  ##新生代与suvivor的比例</span><br><span class="line">   MetaspaceSize            &#x3D; 21807104 (20.796875MB)  ## 元数据空间大小</span><br><span class="line">   CompressedClassSpaceSize &#x3D; 1073741824 (1024.0MB)  ## 压缩空间大小</span><br><span class="line">   MaxMetaspaceSize         &#x3D; 17592186044415 MB  ## 最大元数据空间大小</span><br><span class="line">   G1HeapRegionSize         &#x3D; 0 (0.0MB)  ## G1的对region空间大小</span><br><span class="line"></span><br><span class="line">Heap Usage:  ##堆使用情况【堆内存实际的使用情况】</span><br><span class="line">PS Young Generation  ##新生代（伊甸区Eden区 + 幸存区survior(1+2)空间）</span><br><span class="line">Eden Space:   ##伊甸区</span><br><span class="line">   capacity &#x3D; 32505856 (31.0MB)</span><br><span class="line">   used     &#x3D; 0 (0.0MB)</span><br><span class="line">   free     &#x3D; 32505856 (31.0MB)</span><br><span class="line">   0.0% used</span><br><span class="line">From Space:  ##survior1区</span><br><span class="line">   capacity &#x3D; 2621440 (2.5MB)</span><br><span class="line">   used     &#x3D; 0 (0.0MB)</span><br><span class="line">   free     &#x3D; 2621440 (2.5MB)</span><br><span class="line">   0.0% used</span><br><span class="line">To Space:  ##survior2 区</span><br><span class="line">   capacity &#x3D; 4194304 (4.0MB)</span><br><span class="line">   used     &#x3D; 0 (0.0MB)</span><br><span class="line">   free     &#x3D; 4194304 (4.0MB)</span><br><span class="line">   0.0% used</span><br><span class="line">PS Old Generation  ##老年代使用情况</span><br><span class="line">   capacity &#x3D; 21495808 (20.5MB)</span><br><span class="line">   used     &#x3D; 3738528 (3.565338134765625MB)</span><br><span class="line">   free     &#x3D; 17757280 (16.934661865234375MB)</span><br><span class="line">   17.391893340320124% used</span><br><span class="line"></span><br><span class="line">4524 interned Strings occupying 360168 bytes.</span><br></pre></td></tr></table></figure>

<h3 id="2-1-4-打印每个class的实例信息"><a href="#2-1-4-打印每个class的实例信息" class="headerlink" title="2.1.4 打印每个class的实例信息"></a>2.1.4 打印每个class的实例信息</h3><p><code>jmap -histo:live &lt;pid&gt;</code><br>或<br><code>jmap -histo: &lt;pid&gt;</code></p>
<p>打印每个class的实例数目，内存占用,类全名信息，VM的内部类名字开头会加上前缀”*”。如果live子参数加上后，只统计活的对象数量</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-67f49e0ba5cdbfe3ac02c26aaa396f42648.png" alt=""></p>
<blockquote>
<p>采用jmap -histo pid&gt;a.log日志将其保存，在一段时间后，使用文本对比工具，可以对比出GC回收了哪些对象。</p>
</blockquote>
<blockquote>
<p>jmap -dump:format=b,file=outfile 3024可以将3024进程的内存heap输出出来到outfile文件里，再配合MAT（内存分析工具）。</p>
</blockquote>
<h3 id="2-1-5-打印类加载器的数据"><a href="#2-1-5-打印类加载器的数据" class="headerlink" title="2.1.5 打印类加载器的数据"></a>2.1.5 打印类加载器的数据</h3><p><code>jmap -clstats &lt;pid&gt;</code></p>
<p>-clstats是-permstat的替代方案，在JDK8之前，-permstat用来打印类加载器的数据。打印Java堆内存的永久保存区域的类加载器的智能统计信息。</p>
<p>对于每个类加载器而言，它的名称、活跃度、地址、父类加载器、它所加载的类的数量和大小都会被打印。此外，包含的字符串数量和大小也会被打印。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-4f07b6ea610226208c0791082ab70ce0689.png" alt=""></p>
<h3 id="2-1-6-指定传递给运行jmap的JVM的参数"><a href="#2-1-6-指定传递给运行jmap的JVM的参数" class="headerlink" title="2.1.6 指定传递给运行jmap的JVM的参数"></a>2.1.6 指定传递给运行jmap的JVM的参数</h3><p><code>jmap -J&lt;flag&gt; &lt;pid&gt;</code></p>
<p>指定传递给运行jmap的JVM的参数</p>
<p>如<code>jmap -J-d64 -heap pid</code>表示在64位机上使用<code>jmap -heap</code></p>
<h2 id="2-3-【命令】jstack（输出线程快照）"><a href="#2-3-【命令】jstack（输出线程快照）" class="headerlink" title="2.3 【命令】jstack（输出线程快照）"></a>2.3 【命令】jstack（输出线程快照）</h2><p>jstack用于打印出给定的java进程ID或core file或远程调试服务的Java堆栈信息（也就是线程），如果是在64位机器上，需要指定选项”-J-d64”，Windows的jstack使用方式只支持以下的这种方式：<code>jstack [-l] pid</code></p>
<p>如果java程序崩溃生成core文件，jstack工具可以用来获得core文件的java stack和native stack的信息，从而可以轻松地知道java程序是如何崩溃和在程序何处发生问题。</p>
<p>另外，jstack工具还可以附属到正在运行的java程序中，看到当时运行的java程序的java stack和native stack的信息，如果现在运行的java程序呈现hung的状态，jstack是非常有用的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">    jstack [-l] &lt;pid&gt;</span><br><span class="line">        (to connect to running process)</span><br><span class="line">    jstack -F [-m] [-l] &lt;pid&gt;</span><br><span class="line">        (to connect to a hung process)</span><br><span class="line">    jstack [-m] [-l] &lt;executable&gt; &lt;core&gt;</span><br><span class="line">        (to connect to a core file)</span><br><span class="line">    jstack [-m] [-l] [server_id@]&lt;remote server IP or hostname&gt;</span><br><span class="line">        (to connect to a remote debug server)</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">    -F  to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)</span><br><span class="line">    -m  to print both java and native frames (mixed mode)</span><br><span class="line">    -l  long listing. Prints additional information about locks</span><br><span class="line">    -h or -help to print this help message</span><br></pre></td></tr></table></figure>

<p><strong>格式：<code>jstack [option] &lt;pid&gt;</code> 或 <code>jstack [option] &lt;executable &lt;core&gt;</code> 或 <code>jstack [option] [server_id@]&lt;remote server IP or hostname&gt;</code></strong></p>
<ul>
<li><code>pid</code>：对应jvm的进程id</li>
<li><code>executable core</code>：产生core dump文件</li>
<li><code>remote server IP or hostname</code>：远程调试服务的ip或者hostname</li>
<li><code>server-id</code>：唯一id,假如一台主机上多个远程debug服务;</li>
</ul>
<p>jstack工具特别强大，有众多的可选命令选项和适用场景，比如：</p>
<h3 id="2-3-1-程序没有响应时强制打印线程"><a href="#2-3-1-程序没有响应时强制打印线程" class="headerlink" title="2.3.1 程序没有响应时强制打印线程"></a>2.3.1 程序没有响应时强制打印线程</h3><p><code>jstack -F &lt;pid&gt;</code></p>
<p>当pid对应的程序没有响应时，强制打印线程堆栈信息。</p>
<h3 id="2-3-2-打印完整的堆栈信息"><a href="#2-3-2-打印完整的堆栈信息" class="headerlink" title="2.3.2 打印完整的堆栈信息"></a>2.3.2 打印完整的堆栈信息</h3><p><code>jstack -l &lt;pid&gt;</code></p>
<p>长列表，打印关于锁的附加信息，例如属于java.util.concurrent的ownable synchronizers列表。</p>
<h3 id="2-3-3-打印java-native框架的所有堆栈"><a href="#2-3-3-打印java-native框架的所有堆栈" class="headerlink" title="2.3.3 打印java/native框架的所有堆栈"></a>2.3.3 打印java/native框架的所有堆栈</h3><p><code>jstack -m &lt;pid&gt;</code></p>
<p>打印java和native c/c++框架的所有栈信息。</p>
<h3 id="2-3-4"><a href="#2-3-4" class="headerlink" title="2.3.4"></a>2.3.4</h3><p><a href="https://www.jianshu.com/p/8d5782bc596e" target="_blank" rel="noopener">https://www.jianshu.com/p/8d5782bc596e</a></p>
<h1 id="3-监控跟踪"><a href="#3-监控跟踪" class="headerlink" title="3. 监控跟踪"></a>3. 监控跟踪</h1><h2 id="3-1-【命令】jstat（收集JVM运行数据）"><a href="#3-1-【命令】jstat（收集JVM运行数据）" class="headerlink" title="3.1 【命令】jstat（收集JVM运行数据）"></a>3.1 【命令】jstat（收集JVM运行数据）</h2><p>Jstat是JDK自带的一个轻量级小工具。全称“Java Virtual Machine statistics monitoring tool”，它位于java的bin目录下，主要利用JVM内建的指令对Java应用程序的资源和性能进行实时的命令行的监控，包括了堆内存各部分的使用量，以及加载类的数量，还有垃圾回收状况的监控。</p>
<p>可见，Jstat是轻量级的、专门针对JVM的工具。</p>
<p><strong>格式：<code>jstat [-命令选项] &lt;pid&gt;</code></strong></p>
<p>jstat工具特别强大，有众多的可选项，详细查看堆内各个部分的使用量，以及加载类的数量。使用时，需加上查看进程的进程id，和所选参数。参考格式如下：</p>
<h3 id="3-1-1-类加载统计"><a href="#3-1-1-类加载统计" class="headerlink" title="3.1.1 类加载统计"></a>3.1.1 类加载统计</h3><p><code>jstat –class &lt;pid&gt;</code></p>
<p>显示加载class的数量，及所占空间等信息。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-2e60bd64a892a063c76037f7fbaa5ceb196.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>Loaded</td>
<td>装载的类的数量</td>
</tr>
<tr>
<td>Bytes</td>
<td>装载类所占用的字节数</td>
</tr>
<tr>
<td>Unloaded</td>
<td>卸载类的数量</td>
</tr>
<tr>
<td>Bytes</td>
<td>卸载类的字节数</td>
</tr>
<tr>
<td>Time</td>
<td>装载和卸载类所花费的时间</td>
</tr>
</tbody></table>
<h3 id="3-1-2-编译统计"><a href="#3-1-2-编译统计" class="headerlink" title="3.1.2 编译统计"></a>3.1.2 编译统计</h3><p><code>jstat -compiler &lt;pid&gt;</code></p>
<p>显示VM实时编译的数量等信息。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-452f7c3598597bea5efd6a2596c52f13228.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>Compiled</td>
<td>编译任务执行数量</td>
</tr>
<tr>
<td>Failed</td>
<td>编译任务执行失败数量</td>
</tr>
<tr>
<td>Invalid</td>
<td>编译任务执行失效数量</td>
</tr>
<tr>
<td>Time</td>
<td>编译任务消耗时间</td>
</tr>
<tr>
<td>FailedType</td>
<td>最后一个编译失败任务的类型</td>
</tr>
<tr>
<td>FailedMethod</td>
<td>最后一个编译失败任务所在的类及方法</td>
</tr>
</tbody></table>
<h3 id="3-1-3-垃圾回收统计"><a href="#3-1-3-垃圾回收统计" class="headerlink" title="3.1.3 垃圾回收统计"></a>3.1.3 垃圾回收统计</h3><p><code>jstat -gc &lt;pid&gt;</code></p>
<p>显示gc的信息，查看gc的次数，及时间。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-6c7772ec1a693d7702905d45950f2a661d0.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S0U</td>
<td>年轻代中第一个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>S1U</td>
<td>年轻代中第二个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸区）的容量 (字节)</td>
</tr>
<tr>
<td>EU</td>
<td>年轻代中Eden（伊甸区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>OU</td>
<td>Old代目前已使用空间 (字节)</td>
</tr>
<tr>
<td>PC</td>
<td>Perm(持久代)的容量 (字节)</td>
</tr>
<tr>
<td>PU</td>
<td>Perm(持久代)目前已使用空间 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(full gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
<h3 id="3-1-4-堆内存统计"><a href="#3-1-4-堆内存统计" class="headerlink" title="3.1.4 堆内存统计"></a>3.1.4 堆内存统计</h3><p><code>jstat -gccapacity &lt;pid&gt;</code></p>
<p>显示VM内存中三代（young，old，perm）对象的使用和占用大小</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-c3cb2a0c165067a785f1e82eac8e86d5d6a.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>NGCMN</td>
<td>年轻代(young)中初始化(最小)的大小(字节)</td>
</tr>
<tr>
<td>NGCMX</td>
<td>年轻代(young)的最大容量 (字节)</td>
</tr>
<tr>
<td>NGC</td>
<td>年轻代(young)中当前的容量 (字节)</td>
</tr>
<tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸区）的容量 (字节)</td>
</tr>
<tr>
<td>OGCMN</td>
<td>old代中初始化(最小)的大小 (字节)</td>
</tr>
<tr>
<td>OGCMX</td>
<td>old代的最大容量(字节)</td>
</tr>
<tr>
<td>OGC</td>
<td>old代当前新生成的容量 (字节)</td>
</tr>
<tr>
<td>OC</td>
<td>old代的容量 (字节)</td>
</tr>
<tr>
<td>PGCMN</td>
<td>perm代中初始化(最小)的大小 (字节)</td>
</tr>
<tr>
<td>PGCMX</td>
<td>perm代的最大容量 (字节)</td>
</tr>
<tr>
<td>PGC</td>
<td>perm代当前新生成的容量 (字节)</td>
</tr>
<tr>
<td>PC</td>
<td>Perm(持久代)的容量 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
</tbody></table>
<h3 id="3-1-5-新生代垃圾回收统计"><a href="#3-1-5-新生代垃圾回收统计" class="headerlink" title="3.1.5 新生代垃圾回收统计"></a>3.1.5 新生代垃圾回收统计</h3><p><code>jstat -gcnew &lt;pid&gt;</code></p>
<p>统计年轻代对象的信息</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-ba28e19bd75231959a868d3fa24644cb3ef.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S0U</td>
<td>年轻代中第一个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>S1U</td>
<td>年轻代中第二个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>TT</td>
<td>持有次数限制</td>
</tr>
<tr>
<td>MTT</td>
<td>最大持有次数限制</td>
</tr>
<tr>
<td>DSS</td>
<td>期望的幸存区大小</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸区）的容量 (字节)</td>
</tr>
<tr>
<td>EU</td>
<td>年轻代中Eden（伊甸区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
</tbody></table>
<h3 id="3-1-6-新生代内存统计"><a href="#3-1-6-新生代内存统计" class="headerlink" title="3.1.6 新生代内存统计"></a>3.1.6 新生代内存统计</h3><p><code>jstat -gcnewcapacity &lt;pid&gt;</code></p>
<p>统计年轻代对象的信息及其占用量。</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-be84ee14d1f8990973fbfffa1f014827082.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>NGCMN</td>
<td>年轻代(young)中初始化(最小)的大小(字节)</td>
</tr>
<tr>
<td>NGCMX</td>
<td>年轻代(young)的最大容量 (字节)</td>
</tr>
<tr>
<td>NGC</td>
<td>年轻代(young)中当前的容量 (字节)</td>
</tr>
<tr>
<td>S0CMX</td>
<td>年轻代中第一个survivor（幸存区）的最大容量 (字节)</td>
</tr>
<tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1CMX</td>
<td>年轻代中第二个survivor（幸存区）的最大容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>ECMX</td>
<td>年轻代中Eden（伊甸区）的最大容量 (字节)</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸区）的容量 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
</tbody></table>
<h3 id="3-1-7-老年代垃圾回收统计"><a href="#3-1-7-老年代垃圾回收统计" class="headerlink" title="3.1.7 老年代垃圾回收统计"></a>3.1.7 老年代垃圾回收统计</h3><p><code>jstat -gcold &lt;pid&gt;</code></p>
<p>统计老年代对象的信息</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-44a6d03fa59ee3d179a5352c3f8c17c15b7.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>MC</td>
<td>方法区大小</td>
</tr>
<tr>
<td>MU</td>
<td>方法区使用大小</td>
</tr>
<tr>
<td>CCSC</td>
<td>压缩类空间大小</td>
</tr>
<tr>
<td>CCSU</td>
<td>压缩类空间使用大小</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>OU</td>
<td>Old代目前已使用空间 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
<h3 id="3-1-8-老年代内存统计"><a href="#3-1-8-老年代内存统计" class="headerlink" title="3.1.8 老年代内存统计"></a>3.1.8 老年代内存统计</h3><p><code>jstat -gcoldcapacity &lt;pid&gt;</code></p>
<p>统计老年代对象的信息及其占用量</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-fcb6eca9c1dd7c229a8833e66412f56fe94.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>OGCMN</td>
<td>old代中初始化(最小)的大小 (字节)</td>
</tr>
<tr>
<td>OGCMX</td>
<td>old代的最大容量(字节)</td>
</tr>
<tr>
<td>OGC</td>
<td>old代当前新生成的容量 (字节)</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
<h3 id="3-1-9-元数据空间统计"><a href="#3-1-9-元数据空间统计" class="headerlink" title="3.1.9 元数据空间统计"></a>3.1.9 元数据空间统计</h3><p><code>jstat -gcmetacapacity &lt;pid&gt;</code></p>
<p>统计元数据空间容量</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-b99529bc7810a586ef2d23f874cc9519a9f.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>MCMN</td>
<td>最小元数据容量</td>
</tr>
<tr>
<td>MCMX</td>
<td>最大元数据容量</td>
</tr>
<tr>
<td>MC</td>
<td>方法区大小</td>
</tr>
<tr>
<td>CCSMN</td>
<td>最小压缩类空间大小</td>
</tr>
<tr>
<td>CCSMX</td>
<td>最大压缩类空间大小</td>
</tr>
<tr>
<td>CCSC</td>
<td>压缩类空间大小</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(full gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
<h3 id="3-1-10-总结垃圾回收统计"><a href="#3-1-10-总结垃圾回收统计" class="headerlink" title="3.1.10 总结垃圾回收统计"></a>3.1.10 总结垃圾回收统计</h3><p><code>jstat -gcutil &lt;pid&gt;</code></p>
<p>统计gc容量占比信息</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-e9c3e67acc4d4e817d3c206512b067d181e.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>S0</td>
<td>年轻代中第一个survivor（幸存区）已使用的占当前容量百分比</td>
</tr>
<tr>
<td>S1</td>
<td>年轻代中第二个survivor（幸存区）已使用的占当前容量百分比</td>
</tr>
<tr>
<td>E</td>
<td>年轻代中Eden（伊甸区）已使用的占当前容量百分比</td>
</tr>
<tr>
<td>O</td>
<td>old代已使用的占当前容量百分比</td>
</tr>
<tr>
<td>P</td>
<td>perm代已使用的占当前容量百分比</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(full gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(full gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
<h3 id="3-1-11-JVM编译方法统计"><a href="#3-1-11-JVM编译方法统计" class="headerlink" title="3.1.11 JVM编译方法统计"></a>3.1.11 JVM编译方法统计</h3><p><code>jstat -printcompilation &lt;pid&gt;</code></p>
<p>统计 JVM编译方法的信息</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-918c3cea79f7a31ccdf12b7a0aa75eb461a.png" alt=""></p>
<table>
<thead>
<tr>
<th>显示列名</th>
<th>具体描述</th>
</tr>
</thead>
<tbody><tr>
<td>Compiled</td>
<td>最近编译方法的数量</td>
</tr>
<tr>
<td>Size</td>
<td>最近编译方法的字节码数量</td>
</tr>
<tr>
<td>Type</td>
<td>最近编译方法的编译类型。</td>
</tr>
<tr>
<td>Method</td>
<td>方法名标识</td>
</tr>
</tbody></table>
<h2 id="3-2-jconsole（可视化监控控制台）"><a href="#3-2-jconsole（可视化监控控制台）" class="headerlink" title="3.2 jconsole（可视化监控控制台）"></a>3.2 jconsole（可视化监控控制台）</h2><h2 id="3-3-jhat（用于分析内存快照文件）"><a href="#3-3-jhat（用于分析内存快照文件）" class="headerlink" title="3.3 jhat（用于分析内存快照文件）"></a>3.3 jhat（用于分析内存快照文件）</h2><h1 id="4-分析工具"><a href="#4-分析工具" class="headerlink" title="4. 分析工具"></a>4. 分析工具</h1><h2 id="4-1-visualvm（故障分析工具）"><a href="#4-1-visualvm（故障分析工具）" class="headerlink" title="4.1 visualvm（故障分析工具）"></a>4.1 visualvm（故障分析工具）</h2>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/10/14/JAVA%E5%86%85%E7%BD%AE%E6%8E%92%E5%BA%8FArrays-sort%E5%AE%9E%E7%8E%B0%E7%AE%80%E8%BF%B0/" rel="next" title="JAVA内置排序Arrays.sort实现简述">
                <i class="fa fa-chevron-left"></i> JAVA内置排序Arrays.sort实现简述
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/11/19/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5%E8%AE%BA%E8%BF%B0%E5%92%8C%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/" rel="prev" title="分布式事务的概念论述和方案总结">
                分布式事务的概念论述和方案总结 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div class="ds-thread" data-thread-key="2020/11/09/JAVA监控和调优工具操作指南（此坑未填）/"
           data-title="JAVA监控和调优工具操作指南" data-url="http://yoursite.com/2020/11/09/JAVA%E7%9B%91%E6%8E%A7%E5%92%8C%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97%EF%BC%88%E6%AD%A4%E5%9D%91%E6%9C%AA%E5%A1%AB%EF%BC%89/">
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://oscimg.oschina.net/oscnet/up-c01f8b7b68770ed58c420d68072f773a30b.png"
                alt="cherish-ls" />
            
              <p class="site-author-name" itemprop="name">cherish-ls</p>
              <p class="site-description motion-element" itemprop="description">纸上得来终觉浅</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">55</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">96</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="git@github.com:cherish-ls/cherish-ls.github.io.git" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#进程id的获取"><span class="nav-text">进程id的获取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jinfo-jmap访问受限的解决"><span class="nav-text">jinfo&#x2F;jmap访问受限的解决</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-程序数据"><span class="nav-text">1. 程序数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-【命令】jps（显示java进程）"><span class="nav-text">1.1 【命令】jps（显示java进程）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-1-jps的选项"><span class="nav-text">1.1.1 jps的选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-【命令】jinfo（显示JVM配置信息）"><span class="nav-text">1.2 【命令】jinfo（显示JVM配置信息）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1-输出JVM进程的参数和属性"><span class="nav-text">1.2.1 输出JVM进程的参数和属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2-打印JVM特定参数的值"><span class="nav-text">1.2.2 打印JVM特定参数的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3-开启或关闭JVM特定参数"><span class="nav-text">1.2.3 开启或关闭JVM特定参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-4-设置JVM特定参数的值"><span class="nav-text">1.2.4 设置JVM特定参数的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-5-打印所有JVM参数"><span class="nav-text">1.2.5 打印所有JVM参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-6-打印所有系统参数"><span class="nav-text">1.2.6 打印所有系统参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-快照采集"><span class="nav-text">2. 快照采集</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-【命令】jmap（生成内存快照文件）"><span class="nav-text">2.1 【命令】jmap（生成内存快照文件）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-输出hprof二进制格式的heap文件"><span class="nav-text">2.1.1 输出hprof二进制格式的heap文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-打印正等候回收的对象的信息"><span class="nav-text">2.1.2 打印正等候回收的对象的信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-打印heap的概要信息"><span class="nav-text">2.1.3 打印heap的概要信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-4-打印每个class的实例信息"><span class="nav-text">2.1.4 打印每个class的实例信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-5-打印类加载器的数据"><span class="nav-text">2.1.5 打印类加载器的数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-6-指定传递给运行jmap的JVM的参数"><span class="nav-text">2.1.6 指定传递给运行jmap的JVM的参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-【命令】jstack（输出线程快照）"><span class="nav-text">2.3 【命令】jstack（输出线程快照）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-程序没有响应时强制打印线程"><span class="nav-text">2.3.1 程序没有响应时强制打印线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-打印完整的堆栈信息"><span class="nav-text">2.3.2 打印完整的堆栈信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-3-打印java-native框架的所有堆栈"><span class="nav-text">2.3.3 打印java&#x2F;native框架的所有堆栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-4"><span class="nav-text">2.3.4</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-监控跟踪"><span class="nav-text">3. 监控跟踪</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-【命令】jstat（收集JVM运行数据）"><span class="nav-text">3.1 【命令】jstat（收集JVM运行数据）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-类加载统计"><span class="nav-text">3.1.1 类加载统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-编译统计"><span class="nav-text">3.1.2 编译统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-垃圾回收统计"><span class="nav-text">3.1.3 垃圾回收统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-4-堆内存统计"><span class="nav-text">3.1.4 堆内存统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-5-新生代垃圾回收统计"><span class="nav-text">3.1.5 新生代垃圾回收统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-6-新生代内存统计"><span class="nav-text">3.1.6 新生代内存统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-7-老年代垃圾回收统计"><span class="nav-text">3.1.7 老年代垃圾回收统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-8-老年代内存统计"><span class="nav-text">3.1.8 老年代内存统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-9-元数据空间统计"><span class="nav-text">3.1.9 元数据空间统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-10-总结垃圾回收统计"><span class="nav-text">3.1.10 总结垃圾回收统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-11-JVM编译方法统计"><span class="nav-text">3.1.11 JVM编译方法统计</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-jconsole（可视化监控控制台）"><span class="nav-text">3.2 jconsole（可视化监控控制台）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-jhat（用于分析内存快照文件）"><span class="nav-text">3.3 jhat（用于分析内存快照文件）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-分析工具"><span class="nav-text">4. 分析工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-visualvm（故障分析工具）"><span class="nav-text">4.1 visualvm（故障分析工具）</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cherish-ls</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">380k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 访问总量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"cherish"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'TQhjcmooFXWGQ3qgqUroDKsD-gzGzoHsz',
        appKey: 'zjA9PvG5eljY1JErig8WVQQD',
        placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
